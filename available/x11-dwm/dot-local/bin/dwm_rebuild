#!/bin/env bash

function run_install() {
  DESTDIR=~/.local make clean install
}

set +x

APPSDIR=~/dotfiles/apps
BASEDIR=$(realpath $APPSDIR)

feh --bg-scale "$(<"${HOME}/.cache/wal/wal")"

cd "${BASEDIR}/dmenu" && run_install
cd "${BASEDIR}/slock" && run_install
cd "${BASEDIR}/slstatus" && run_install
cd "${BASEDIR}/st" && run_install
cd "${BASEDIR}/dwm" && run_install

# Restart dwm
kill -HUP $(ps aux | grep dwm | grep -v grep | awk '{print $2}')

set -x
