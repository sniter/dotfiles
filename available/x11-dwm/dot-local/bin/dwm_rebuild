#!/bin/env bash

function run_install() {
  DESTDIR=~/.local make clean install
}

APPSDIR=~/dotfiles/apps
BASEDIR=$(realpath $APPSDIR)

cd "${BASEDIR}/dmenu" && run_install
cd "${BASEDIR}/slock" && run_install
cd "${BASEDIR}/slstatus" && run_install
cd "${BASEDIR}/st" && run_install
cd "${BASEDIR}/dwm" && run_install

# Restart dwm
feh --bg-scale "$(<"${HOME}/.cache/wal/wal")"
cat ~/.cache/wal/xrdb_extra | xrdb -merge
kill -HUP $(ps aux | grep dwm | grep -v grep | awk '{print $2}')
